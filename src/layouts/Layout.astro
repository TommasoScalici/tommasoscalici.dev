---
import { ClientRouter } from "astro:transitions";
import { SiGithub, SiLinkedin, SiInstagram, SiSpotify } from "react-icons/si";

import { Header } from "../components/Header";
import SEOHead from "../components/SEOHead.astro";

import { ui, defaultLang } from "../i18n/ui";

import "@fontsource/inter";
import "@fontsource/jetbrains-mono";
import "../styles/global.css";

interface Props {
    title: string;
    description?: string;
    lang?: string;
}

const {
    title,
    description = "Senior Software Engineer & Prog Metal Musician",
    lang = defaultLang,
} = Astro.props;

const t = ui[lang as keyof typeof ui] || ui[defaultLang];

// Definiamo qui i link, cos√¨ possiamo passarli sia al componente React che usarli altrove se serve
const navItems = [
    { label: t["nav.home"], href: lang === "en" ? "/" : `/${lang}` },
    { label: t["nav.projects"], href: "#projects" },
    { label: t["nav.music"], href: "#music" },
];
// Dynamic Copyright Year
const currentYear = new Date().getFullYear();
const startYear = 2010; // Career start
const copyrightDate =
    startYear === currentYear
        ? `${startYear}`
        : `${startYear} - ${currentYear}`;
---

<!doctype html>
<html lang={lang} class="scroll-smooth">
    <head>
        <SEOHead title={title} description={description} />
        <ClientRouter />
    </head>
    <body
        class="bg-background text-white font-sans antialiased selection:bg-primary selection:text-black"
    >
        <Header client:load lang={lang} navItems={navItems} />

        <main class="pt-20 min-h-screen relative overflow-hidden">
            <div
                class="fixed top-0 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-[128px] -z-10 pointer-events-none"
            >
            </div>
            <div
                class="fixed bottom-0 right-1/4 w-96 h-96 bg-secondary/10 rounded-full blur-[128px] -z-10 pointer-events-none"
            >
            </div>

            <slot />
        </main>

        <footer
            class="border-t border-surface bg-black/50 backdrop-blur-md mt-20"
        >
            <div
                class="max-w-7xl mx-auto px-6 py-8 flex flex-col md:flex-row items-center justify-between gap-4"
            >
                <p class="text-gray-500 text-sm font-mono">
                    &copy; {copyrightDate} Tommaso Scalici. {
                        t["footer.copyright"]
                    }
                </p>
                <div class="flex gap-6">
                    {/* Dev Links - Hover Primary */}
                    <a
                        href="https://github.com/TommasoScalici"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-gray-400 hover:text-primary transition-colors"
                        aria-label="GitHub"
                    >
                        <SiGithub className="w-5 h-5" />
                    </a>
                    <a
                        href="https://www.linkedin.com/in/tommasoscalici"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-gray-400 hover:text-primary transition-colors"
                        aria-label="LinkedIn"
                    >
                        <SiLinkedin className="w-5 h-5" />
                    </a>

                    {/* Music/Social Links - Hover Secondary */}
                    <a
                        href="https://open.spotify.com/artist/6KswMpmmtp3tUbWF3TjBgD"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-gray-400 hover:text-secondary transition-colors"
                        aria-label="Spotify"
                    >
                        <SiSpotify className="w-5 h-5" />
                    </a>
                    <a
                        href="https://www.instagram.com/tommasoscalici91"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-gray-400 hover:text-secondary transition-colors"
                        aria-label="Instagram"
                    >
                        <SiInstagram className="w-5 h-5" />
                    </a>
                </div>
            </div>
        </footer>
    </body>
</html>
